<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>双向链表</title>
</head>
<body>
  <script>
    function Node(element) {
      this.element = element;
      this.next = null;
      this.previous = null;
    }

    function LList() {
      this.head = new Node('head');
      this.find = find;
      this.insert = insert;
      this.display = display;
      this.remove = remove;
      this.findLast = findLast;
      this.displayReverse = displayReverse;
    }

    function find(item) {
      let currNode = this.head;
      while (currNode.element !== item){
        currNode = currNode.next;
      }
      return currNode;
    }

    function insert(newElement,item) {
      let newNode = new Node(newElement);
      let currNode = this.find(item);
      newNode.next = currNode.next;
      currNode.next = newNode;
      newNode.previous = currNode;
      if(newNode.next !== null){
        newNode.next.previous = newNode;
      }
    }

    function display() {
      let currNode = this.head;
      while (currNode.next !== null){
        console.log(currNode.next.element);
        currNode = currNode.next;
      }
    }

    function remove(item){
      let currNode = this.find(item);

      if(currNode.next !== null){
        currNode.previous.next = currNode.next;
        currNode.next.previous = currNode.previous;
        currNode.next = currNode.previous = null;
      } else {
        currNode.previous.next = null;
        currNode.previous = null;
      }
    }
    
    function findLast() {
      let currNode = this.head;
      while (currNode.next !== null){
        currNode = currNode.next;
      }
      return currNode;
    }

    function displayReverse(){
      let currNode = this.findLast();
      debugger;
      while (currNode.previous !== null){
        console.log(currNode.element);
        currNode = currNode.previous;
      }
    }


    let city = new LList();
    city.insert('first','head');
    city.insert('second','first');
    city.insert('third','second');

    city.display();

    city.displayReverse();
  </script>
</body>
</html>